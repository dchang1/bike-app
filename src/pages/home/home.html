<ion-header>
  <ion-toolbar>
    <button ion-button menuToggle="left" start>
      <ion-icon name="menu" style="font-size:37px; color: white"></ion-icon>
    </button>
    <ion-title><img src="assets/text-logo.png" class="logo"></ion-title>
    <button ion-button menuToggle="right" end>
      <ion-icon name="search" style="font-size:37px; color: white"></ion-icon>
    </button>
  </ion-toolbar>
</ion-header>

<ion-content class="background">
  <ion-card style="position: absolute; top: 0; z-index: 4;" [ngClass]="bikePreviewClass">
    <ion-card-header style="text-align: center; font-size: 20px; font-weight: bold">
      Hunter's Bike
    </ion-card-header>
    <img src="assets/bike-profile.png" class="bikePreview">
    <div class="bikePreviewStats">
      <div style="display: inline-block; height: 100%; margin: auto; padding-right: 10px">
        <p>Size</p>
        <br><br>
        <p>Rating</p>
        <br><br>
        <p>Rides</p>
      </div>
      <div style="display: inline-block; float: right; height: 100%; margin-top: -18px; margin-right: -30px">
        <b style="color: gray; font-size:47px;">S</b><br>
        <b style="color: gray; font-size:47px;">4.9</b><br>
        <b style="color: gray; font-size:47px;">25</b>
      </div>
    </div>
  </ion-card>
  <img src="assets/QR_2.png" class="qr" (click)="scanQR()" *ngIf="!inRide">
  <div class="circle" (click)="center()" *ngIf="!inRide">
    <ion-icon name="locate" class="icon locate"></ion-icon>
  </div>
  <agm-map (mapReady)="mapReady($event)" [latitude]="39.905022" [longitude]="-75.354034" [zoom]="16" [streetViewControl]="false" [clickableIcons]="false" (mapClick)="closeBikePreview()" #gm>
    <!--<agm-marker [latitude]="39.905022" [longitude]="-75.354034"></agm-marker>-->
    <!--<agm-polygon [paths]="geofence" [zIndex]="2" [fillOpacity]="0" [strokeWeight]="1" [strokeOpacity]="0.1" [clickable]="false">
    </agm-polygon>-->
    <agm-polygon [paths]="paths" [fillOpacity]="0.2" [clickable]="false" [strokeWeight]="0"></agm-polygon>
    <!--<agm-marker [latitude]="latitude" [longitude]="longitude" [iconUrl]="'https://i.stack.imgur.com/VpVF8.png'"></agm-marker>-->
    <agm-marker [zIndex]="3" [latitude]="39.905022" [longitude]="-75.354034" [iconUrl]="'assets/location.png'">
    </agm-marker>
    <!--<agm-marker [visible]="!inRide" *ngFor="let bike of bikes" [zIndex]="2" [latitude]="bike.currentPosition[0]" [longitude]="bike.currentPosition[1]" [iconUrl]="'assets/bike-icon.png'" (markerClick)="bikeProfile(infoWindow, gm, bike.number)">-->
    <agm-marker [visible]="!inRide" *ngFor="let bike of bikes" [zIndex]="2" [latitude]="bike.currentPosition[0]" [longitude]="bike.currentPosition[1]" [iconUrl]="'assets/bike-icon.png'" (markerClick)="bikePreview(bike.number)">
    </agm-marker>
    <agm-marker *ngFor="let hub of hubs" [zIndex]="1" [latitude]="hub.location[0]" [longitude]="hub.location[1]" [iconUrl]="'assets/hub-icon.png'">
      <agm-circle [latitude]="hub.location[0]" [longitude]="hub.location[1]" [radius]="hub.radius*1000" [fillColor]="color" [fillOpacity]="0.3" [strokeWeight]="0"></agm-circle>
    </agm-marker>
    <!--
    <agm-polyline [visible]="inRide">
      <agm-polyline-point *ngFor="let data of ridePath"
        [latitude]="data[0]"
        [longitude]="data[1]">
      </agm-polyline-point>
    </agm-polyline>-->
    <agm-polyline [visible]="inRide">
      <agm-polyline-point *ngFor="let data of ridePath"
        [latitude]="data.lat"
        [longitude]="data.lng">
      </agm-polyline-point>
    </agm-polyline>
    <agm-marker [visible]="inRide" [latitude]="currentLatitude" [longitude]="currentLongitude" [iconUrl]="'assets/inride.png'"></agm-marker>
  </agm-map>
  <ion-card [hidden]="!inRide" style="z-index: 1; position: absolute; bottom: 0">
    <ion-card-header style="text-align: center; font-size: 20px">
      You are currently in a ride.
    </ion-card-header>
    <ion-card-content class="inRide-stats">
      <div style="float: left">
        <ion-icon name="time" class="icon"></ion-icon>{{this.rideTime}} min
        <br>
        <ion-icon name="card" class="icon"></ion-icon>${{this.rideCost}}
      </div>
      <div>
        <ion-icon name="speedometer" class="icon"></ion-icon>{{this.rideDistance}} km
        <br>
        <ion-icon name="flame" class="icon"></ion-icon>{{this.rideCalories}} cal
      </div>
      <input type="button" class="rounded" value="Help" (click)="help()" style="background-color:#ffffff; color: #633bb7; padding:0px; border: 1px solid #633bb7">
    </ion-card-content>
  </ion-card>

  <ion-menu [content]="menu" side="left" id="menu">
    <ion-content>
      <ion-item class="menu-items" text-wrap>
        <div class="name">
          {{firstName}} {{lastName}}
        </div>
        <div class="name">
          {{campus}} College
        </div>
        <br>
        <div style="display: inline-block">
          <ion-icon name="bicycle" class="icon"></ion-icon>
          <p class="stats">{{totalRides}} Rides</p>
        </div>
        <div style="display: inline-block">
          <ion-icon name="speedometer" class="icon"></ion-icon>
          <p class="stats">{{totalDistance}} km</p>
        </div>
        <div style="display: inline-block">
          <ion-icon name="time" class="icon"></ion-icon>
          <p class="stats">{{totalRideTime}} h</p>
        </div>
      </ion-item>
      <ion-list>
        <button ion-item (click)="ridehistory()">Your Rides</button>
        <button ion-item (click)="payment()">Payment</button>
        <button ion-item (click)="help()">Help</button>
        <button ion-item (click)="settings()">Settings</button>
        <button ion-item (click)="share()">Share a bike</button>
        <button ion-item (click)="logout()">Logout</button>
        <button ion-item (click)="reset()">Reset</button>
      </ion-list>
    </ion-content>
  </ion-menu>
  <ion-nav #menu style="display: none"></ion-nav>

<!--
  <ion-menu [content]="filter" side="right" id="filter">
    <ion-header>
      <ion-toolbar>
        <ion-title>Filter</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content>
    <ion-list>
      <button ion-item (click)="payment()">Payment</button>
      <button ion-item (click)="ridehistory()">Your Rides</button>
      <button ion-item (click)="help()">Help</button>
      <button ion-item (click)="setting()">Settings</button>
      <button ion-item (click)="logout()">Logout</button>
    </ion-list>
  </ion-content>
  </ion-menu>
  <ion-nav #filter style="display: none"></ion-nav>
-->
</ion-content>
