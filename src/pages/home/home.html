<ion-content class="background">
  <div class="menu">
    <ion-icon name="menu" menuToggle="left" style="color: black; font-size:40px; float: left;"></ion-icon>
  </div>
  <!--
  <div class="filter">
    <ion-icon name="options" menuToggle="right" style="color: black; font-size:40px; float: right;"></ion-icon>
  </div>
  -->
  <img src="assets/qrcode.png" class="qr" (click)="scanQR()">
  <agm-map [latitude]="39.905022" [longitude]="-75.354034" [zoom]="16" [streetViewControl]="false" [clickableIcons]="false" (mapClick)="closeProfiles(gm)" #gm>
    <!--<agm-marker [latitude]="39.905022" [longitude]="-75.354034"></agm-marker>-->
    <agm-polygon [paths]="paths" [fillOpacity]="0.1" [clickable]="false">
    </agm-polygon>
    <agm-marker [latitude]="latitude" [longitude]="longitude" [iconUrl]="'https://i.stack.imgur.com/VpVF8.png'"></agm-marker>
    <agm-marker [latitude]="39.905022" [longitude]="-75.354034" [iconUrl]="'https://i.stack.imgur.com/VpVF8.png'" (markerClick)="bikeProfile(infoWindow, gm, 2)">
    <agm-info-window [disableAutoPan]="false" #infoWindow>Title</agm-info-window></agm-marker>
    <agm-marker [visible]="!inRide" *ngFor="let bike of bikes" [latitude]="bike.currentPosition[0]" [longitude]="bike.currentPosition[1]" [iconUrl]="'assets/bike.png'" (markerClick)="bikeProfile(infoWindow, gm, bike.number)">
      <agm-info-window [disableAutoPan]="false" #infoWindow>
        <div class="rating">
          {{bike.rating}}â˜…
        </div>
        <div class="profile">
          <b>Name:</b> {{bike.name}} <br><b>Type:</b> {{bike.type}} <br><b>Color:</b> {{bike.color}}<br>
          <input type="button" class="rounded" value="Show more details" (click)="moreDetails(bike.number)">
        </div>
      </agm-info-window>
    </agm-marker>
    <agm-polyline [visible]="inRide">
      <agm-polyline-point *ngFor="let data of ridePath"
        [latitude]="data.lat"
        [longitude]="data.lng">
      </agm-polyline-point>
    </agm-polyline>
    <agm-marker [visible]="inRide" [latitude]="currentLatitude" [longitude]="currentLongitude" [iconUrl]="'assets/inride.png'"></agm-marker>
  </agm-map>
  <ion-card [hidden]="!inRide" style="z-index: 1; position: absolute; bottom: 0">
    <ion-card-header style="text-align: center; font-size: 20px">
      You are currently in a ride.
    </ion-card-header>
    <ion-card-content class="inRide-stats">
      <div style="float: left">
        <ion-icon name="time" class="icon"></ion-icon>{{this.rideTime}} min
        <br>
        <ion-icon name="card" class="icon"></ion-icon>${{this.rideCost}}
      </div>
      <div>
        <ion-icon name="speedometer" class="icon"></ion-icon>{{this.rideDistance}} km
        <br>
        <ion-icon name="flame" class="icon"></ion-icon>{{this.rideCalories}} cal
      </div>
      <input type="button" class="rounded" value="Help" (click)="moreDetails(bike.number)" style="background-color:#ffffff; color: #633bb7; padding:0px; border: 1px solid #633bb7">
    </ion-card-content>
  </ion-card>

  <ion-menu [content]="menu" side="left" id="menu">
    <ion-content>
      <ion-item class="menu-items" text-wrap>
        <div class="name">
          {{firstName}} {{lastName}}
        </div>
        <div class="name">
          {{campus}} College
        </div>
        <br>
        <div style="display: inline-block">
          <ion-icon name="bicycle" class="icon"></ion-icon>
          <p class="stats">{{totalRides}} Rides</p>
        </div>
        <div style="display: inline-block">
          <ion-icon name="speedometer" class="icon"></ion-icon>
          <p class="stats">{{totalDistance}} km</p>
        </div>
        <div style="display: inline-block">
          <ion-icon name="time" class="icon"></ion-icon>
          <p class="stats">{{totalRideTime}} h</p>
        </div>
      </ion-item>
      <ion-list>
        <button ion-item (click)="ridehistory()">Your Rides</button>
        <button ion-item (click)="payment()">Payment</button>
        <button ion-item (click)="help()">Help</button>
        <!--<button ion-item (click)="setting()">Settings</button>-->
        <button ion-item (click)="share()">Share a bike</button>
        <button ion-item (click)="logout()">Logout</button>
        <button ion-item (click)="reset()">Reset</button>
      </ion-list>
    </ion-content>
  </ion-menu>
  <ion-nav #menu style="display: none"></ion-nav>

  <ion-menu [content]="filter" side="right" id="filter">
    <ion-header>
      <ion-toolbar>
        <ion-title>Filter</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content>
    <ion-list>
      <button ion-item (click)="payment()">Payment</button>
      <button ion-item (click)="ridehistory()">Your Rides</button>
      <button ion-item (click)="help()">Help</button>
      <button ion-item (click)="setting()">Settings</button>
      <button ion-item (click)="logout()">Logout</button>
    </ion-list>
  </ion-content>
  </ion-menu>
  <ion-nav #filter style="display: none"></ion-nav>

</ion-content>
